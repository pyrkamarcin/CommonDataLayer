[objects]
{
    "a0000000-0000-0000-0000-000000000001,00000000-0000-0000-0000-000000000001": {"a": 58},
    "a0000000-0000-0000-0000-000000000002,00000000-0000-0000-0000-000000000002": { "b": 42 },
    "a0000000-0000-0000-0000-000000000002,00000000-0000-0000-0000-000000000003": { "b": 12 },
    "a0000000-0000-0000-0000-000000000003,00000000-0000-0000-0000-000000000004": { "c": 69 },
    "a0000000-0000-0000-0000-000000000003,00000000-0000-0000-0000-000000000005": { "c": 420 }
}

[edges]
[
  {
    "objects": [
      {
        "relation_id": "b0000000-0000-0000-0000-000000000001",
        "object_id": "00000000-0000-0000-0000-000000000001",
        "children": [
          "00000000-0000-0000-0000-000000000003"
        ],
        "subtrees": [
          {
            "objects": [
              {
                "relation_id": "b0000000-0000-0000-0000-000000000002",
                "object_id": "00000000-0000-0000-0000-000000000003",
                "children": [
                    "00000000-0000-0000-0000-000000000004",
                    "00000000-0000-0000-0000-000000000005"
                ],
                "subtrees": [],
                "relation": {
                  "parent_schema_id": "a0000000-0000-0000-0000-000000000002",
                  "child_schema_id": "a0000000-0000-0000-0000-000000000003"
                }
              }
            ]
          }
        ],
        "relation": {
          "parent_schema_id": "a0000000-0000-0000-0000-000000000001",
          "child_schema_id": "a0000000-0000-0000-0000-000000000002"
        }
      }
    ]
  }
]

[view]
{
  "id": "00000000-0000-0000-0000-000000000001",
  "name": "Sample View",
  "base_schema_id": "00000000-0000-0000-0000-000000000001",
  "materializer_options": {},
  "materializer_address": "",
  "fields": {
    "baz": {
      "simple": {
        "field_name": "a",
        "field_type": "numeric"
      }
    },
    "foo": {
      "computed": {
        "computation": {
          "FieldValue": {
            "schema_id": 1,
            "field_path": "b"
          }
        },
        "field_type": "numeric"
      }
    },
    "bar": {
      "computed": {
        "computation": {
          "FieldValue": {
            "schema_id": 2,
            "field_path": "c"
          }
        },
        "field_type": "numeric"
      }
    }
  },
  "relations": [
    {
      "global_id": "b0000000-0000-0000-0000-000000000001",
      "local_id": 1,
      "search_for": "Children",
      "relations": [
        {
            "global_id": "b0000000-0000-0000-0000-000000000002",
            "local_id": 2,
            "search_for": "Children"
        }
      ]
    }
 ]
}

[expected.view_plan_build]
{
  "missing": {
    "a0000000-0000-0000-0000-000000000001,00000000-0000-0000-0000-000000000001": [
      0,
      1
    ],
    "a0000000-0000-0000-0000-000000000002,00000000-0000-0000-0000-000000000003": [
      0,
      1
    ],
    "a0000000-0000-0000-0000-000000000003,00000000-0000-0000-0000-000000000004": [
      0
    ],
    "a0000000-0000-0000-0000-000000000003,00000000-0000-0000-0000-000000000005": [
      1
    ]
  },
  "unfinished_rows": [
    {
      "fields": {
        "bar": {
          "Computed": {
            "computation": {
              "FieldValue": {
                "field_path": "c",
                "object": "a0000000-0000-0000-0000-000000000003,00000000-0000-0000-0000-000000000004"
              }
            },
            "field_type": "Numeric"
          }
        },
        "baz": {
          "Simple": {
            "field_name": "a",
            "field_type": "Numeric",
            "object": "a0000000-0000-0000-0000-000000000001,00000000-0000-0000-0000-000000000001"
          }
        },
        "foo": {
          "Computed": {
            "computation": {
              "FieldValue": {
                "field_path": "b",
                "object": "a0000000-0000-0000-0000-000000000002,00000000-0000-0000-0000-000000000003"
              }
            },
            "field_type": "Numeric"
          }
        }
      },
      "missing": 3,
      "objects": {},
      "root_object": "a0000000-0000-0000-0000-000000000001,00000000-0000-0000-0000-000000000001"
    },
    {
      "fields": {
        "bar": {
          "Computed": {
            "computation": {
              "FieldValue": {
                "field_path": "c",
                "object": "a0000000-0000-0000-0000-000000000003,00000000-0000-0000-0000-000000000005"
              }
            },
            "field_type": "Numeric"
          }
        },
        "baz": {
          "Simple": {
            "field_name": "a",
            "field_type": "Numeric",
            "object": "a0000000-0000-0000-0000-000000000001,00000000-0000-0000-0000-000000000001"
          }
        },
        "foo": {
          "Computed": {
            "computation": {
              "FieldValue": {
                "field_path": "b",
                "object": "a0000000-0000-0000-0000-000000000002,00000000-0000-0000-0000-000000000003"
              }
            },
            "field_type": "Numeric"
          }
        }
      },
      "missing": 3,
      "objects": {},
      "root_object": "a0000000-0000-0000-0000-000000000001,00000000-0000-0000-0000-000000000001"
    }
  ]
}

[end]
